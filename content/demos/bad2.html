<!--#include virtual="/head.html"-->
<TITLE>PDL - Screenshots / Demos</TITLE>
<STYLE type="text/css">span.comment{color:red;}</STYLE>
</HEAD>

<BODY>

<div id="navBar">
<!--#include virtual="/menu.html"-->
</div>

<div id="main">
<H2> Graphical tour of the bad value support in PDL </H2>


<p align="justify">
This demo is just a bit of eye-candy to show bad values in action,
and requires PGPLOT support in PDL. It makes use of the image of
m51 kindly provided by the Hubble Space Telescope.
</p>

<p align="justify">
It also serves to demonstrate that you often don't need to change
your code to handle bad values, as the routines may 'do it' for you.
</p>

<PRE><CODE>
<span class="comment"># read in the image ($m51path has been set up by this demo to </SPAN>
<span class="comment"># contain the location of the file)</SPAN>
<STRONG>perldl></STRONG> $m51 = rfits "$m51path/m51.fits";
<span class="comment"># display it</SPAN>
<STRONG>perldl></STRONG> $just = { JUSTIFY => 1 };
<STRONG>perldl></STRONG> imag $m51, $just;

BITPIX = 16 size = 65536 pixels
Reading 131072bytes
BSCALE = 1.0000000000E0 &&  BZERO = 0.0000000000E0
Displaying 256 x 256 image from 24 to 500 ...
</CODE></PRE>

<A HREF="bad2_1.gif"><IMG ALT="[Thumbnail]" SRC="bad2_thumb1.gif" width="170" height="136"> Output</A>

<PRE><CODE>
<span class="comment"># now, let's mask out the central 30 pixels and display it</SPAN>
<STRONG>perldl></STRONG> $masked = $m51->setbadif( $m51->rvals({CENTRE=>[128,128]}) < 30 );
<span class="comment"># since imag auto-scales the output, the bad values are not displayed</SPAN>
<STRONG>perldl></STRONG> imag $masked, $just;
<span class="comment"># compare the statistics of the images</SPAN>
<span class="comment"># (as $PDL::verbose = 1, stats prints out the answers itself)</SPAN>
<STRONG>perldl></STRONG> print "Original:\n"; $m51->stats;
<STRONG>perldl></STRONG> print "Masked:\n";   $masked->stats;

Displaying 256 x 256 image from 24 to 500 ...
</CODE></PRE>

<A HREF="bad2_2.gif"><IMG ALT="[Thumbnail]" SRC="bad2_thumb2.gif" width="170" height="136"> Output</A>

<pre><code>
Original:
Mean = 104.193572998047, RMS = 67.4254208960541, Median = 88
Min  = 24, Max = 500
Masked:
Mean = 96.1637598444026, RMS = 49.9066302680633, Median = 86
Min  = 24, Max = 500

<span class="comment"># let's filter it a little bit</SPAN>
<STRONG>perldl></STRONG> use PDL::Image2D;
<STRONG>perldl></STRONG> $nb = 9;
<STRONG>perldl></STRONG> $filtered = med2d $masked, ones($nb,$nb), { Boundary => 'Truncate' };
<span class="comment"># this is a model of the diffuse component of m51</SPAN>
<STRONG>perldl></STRONG> imag $filtered, $just;

Displaying 256 x 256 image from 38 to 313 ...
</CODE></PRE>

<A HREF="bad2_3.gif"><IMG ALT="[Thumbnail]" SRC="bad2_thumb3.gif" width="170" height="136"> Output</A>

<PRE>
<CODE>
<span class="comment"># unsharp masking, to bring out the small-scale detail</SPAN>
<STRONG>perldl></STRONG> $unsharp = $masked - $filtered;
<STRONG>perldl></STRONG> imag $unsharp, $just;

Displaying 256 x 256 image from -64 to 459 ...
</CODE></PRE>

<A HREF="bad2_4.gif"><IMG ALT="[Thumbnail]" SRC="bad2_thumb4.gif" width="170" height="136"> Output</A>

<PRE><CODE>
<span class="comment"># add on some contours showing the large scale structure of the galaxy</SPAN>
<STRONG>perldl></STRONG> imag $unsharp, $just;
<STRONG>perldl></STRONG> hold;
<STRONG>perldl></STRONG> cont $filtered;
<STRONG>perldl></STRONG> rel;

Displaying 256 x 256 image from -64 to 459 ...
Graphics on HOLD
Contouring 256 x 256 image from 38 to 313 in 9 steps
Graphics RELEASED
</CODE></PRE>

<A HREF="bad2_5.gif"><IMG ALT="[Thumbnail]" SRC="bad2_thumb5.gif" width="170" height="136"> Output</A>

<HR>
<IMG SRC="/images/eMail.gif" ALT="" ALIGN="LEFT" width="77" height="37">
<SMALL>

This page was written by Doug Burke. Please send bugs and ideas for
this web page to <A
HREF="mailto:burke@IfA.Hawaii.Edu">burke@IfA.Hawaii.Edu</A>.  <BR>
Last modified: <!--#flastmod virtual="bad2.shtml"-->
</SMALL>
<p>
 <a href="http://validator.w3.org/check?uri=referer">
 <img src="http://www.w3.org/Icons/valid-html401"
 border="0" alt="Valid HTML 4.01 Transitional" height="31" width="88"></a>
  
 <a href="http://jigsaw.w3.org/css-validator/check/referer">
  <img style="border:0;width:88px;height:31px"
       src="http://jigsaw.w3.org/css-validator/images/vcss" 
       alt="Valid CSS!">
 </a>
</p>
</div><!--end div main-->
</BODY>
</HTML>
